import{_ as O}from"./sPrompt.b2dad4d0.js";import{a as P,S as B,e as M,r as l,h,i as a,j as d,k as m,y as g,x as o,A as U,l as p,m as z,o as n,F as f,s as w,G as W}from"./entry.b3d0478f.js";import"./close.79d7cbfd.js";import"./_commonjsHelpers.86de73f2.js";import"./_commonjs-dynamic-modules.302442b1.js";const Y={class:"workbench"},j={key:0,class:"tag2"},q={key:1,class:"tag3"},G={class:"tag1"},H=["onClick"],K=["onClick"],J={class:"table-bottom"},Q={class:"name"},X={key:0,class:"action-switch"},Z=P({__name:"index",setup(ee){const{locale:te,t:r}=B(),k=M(),y=l(),E=l(!1),s=l(!1),{proxy:c}=z(),_=l(!1),L=l(!1),I=l([{title:r("aiEnterprise.workbench.工作台页面"),key:"name"},{title:r("aiEnterprise.workbench.可见范围"),key:"visibleRangeList",slot:"visibleRangeList"},{title:r("public.操作"),slot:"action"}]),C=l(""),u=l([]),b=()=>{s.value=!0,c.$api.queryWorkbenchList().then(e=>{u.value=e.data?e.data:[],s.value=!1}).catch(()=>{s.value=!1}),c.$api.getUserAccountInfo().then(e=>{_.value=e.data.sourceDisplayListFlag,L.value=e.data.partnerFlag})},$=e=>{if(e)k.push("/ai/enterprise/build/workbench/deploy?code="+e.code+"&bizType="+e.bizType);else{if(u.value.length>=20){c.$Message.error(r("aiEnterprise.workbench.最多可添加20个页面"));return}k.push("/ai/enterprise/build/workbench/deploy?bizType=WORKBENCH")}},R=e=>{C.value=e,y.value.showFn()},T=()=>{s.value=!0,c.$api.deleteSecondView({viewCode:u.value[C.value].code}).then(()=>{s.value=!1,c.$Message.success(r("publicMsg.已删除")),b()}).catch(()=>{s.value=!1})},F=()=>{let e={configId:"SOURCE_DISPLAY_LIST",configType:"SOURCE_DISPLAY_LIST",domainCode:"fusion",dataStatus:_.value?"NORMAL":"DISABLE"};s.value=!0,c.$api.updateSystemConfig(e).then(()=>{c.$Message.success("已更改"),s.value=!1,b()}).catch(()=>{s.value=!1})};return b(),(e,v)=>{const x=h("Table"),D=h("Switch"),V=h("Icon"),A=h("Tooltip"),N=O;return n(),a("div",Y,[d(x,{columns:I.value,data:u.value,loading:s.value,"max-height":"500",border:u.value.length>0},{visibleRangeList:m(({row:t,index:S})=>[t.permissionList&&t.permissionList.length>0?(n(!0),a(f,{key:0},w(t.permissionList,i=>(n(),a(f,null,[i.type=="user"?(n(),a("div",j,o(i.name),1)):p("",!0),i.type=="dept"?(n(),a("div",q,o(i.name),1)):p("",!0)],64))),256)):(n(!0),a(f,{key:1},w(t.visibleRangeList,i=>(n(),a("div",G,o(i),1))),256))]),action:m(({row:t,index:S})=>[t.editFlag?(n(),a("span",{key:0,onClick:i=>$(t)},o(e.$t("public.配置")),9,H)):p("",!0),t.delFlag?(n(),a("span",{key:1,class:"deleteSpan",onClick:i=>R(S)},o(e.$t("public.删除")),9,K)):p("",!0)]),_:1},8,["columns","data","loading","border"]),g("div",J,[g("div",{class:"add",onClick:v[0]||(v[0]=t=>$(""))},"+ "+o(e.$t("aiEnterprise.workbench.创建页面")),1),g("div",Q,o(e.$t("aiEnterprise.workbench.最多可添加20个页面")),1),L.value?(n(),a("div",X,[d(D,{onOnChange:F,modelValue:_.value,"onUpdate:modelValue":v[1]||(v[1]=t=>_.value=t)},null,8,["modelValue"]),U(" "+o(e.$t("aiEnterprise.workbench.单工作台模式"))+" ",1),d(A,{content:e.$t("aiEnterprise.workbench.默认取第一个自定义可删除的工作台"),"max-width":"200"},{default:m(()=>[d(V,{type:"ios-help-circle-outline",class:"pointer"})]),_:1},8,["content"])])):p("",!0)]),d(N,{ref_key:"sPromptRef",ref:y,title:e.$t("public.删除"),loading:E.value,onOk:T},{content:m(()=>[g("div",null,o(e.$t("aiEnterprise.workbench.是否确认删除"))+"?",1)]),_:1},8,["title","loading"])])}}});const le=W(Z,[["__scopeId","data-v-8f6aecb5"]]);export{le as default};
